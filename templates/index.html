<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Signal Bot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-layout">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">‚ö°</div>
                    <h1>CryptoScanner</h1>
                </div>
                <div class="header-stats">
                    <div class="stat-mini">
                        <span class="stat-value" id="totalSymbols">0</span>
                        <span class="stat-label">Scanning</span>
                    </div>
                    <div class="stat-mini danger">
                        <span class="stat-value" id="signalsReady">0</span>
                        <span class="stat-label">Signals</span>
                    </div>
                    <div class="stat-mini warning">
                        <span class="stat-value" id="alertCount">0</span>
                        <span class="stat-label">Alerts</span>
                    </div>
                    <div class="connection-status" id="connectionStatus">
                        <div class="status-dot"></div>
                        <span id="botStatus">Offline</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Control Bar -->
        <div class="control-bar">
            <div class="control-section">
                <button class="btn-modern primary" id="startBtn" onclick="startBot()">
                    <span class="btn-icon">üöÄ</span>
                    <span>Start Scanner</span>
                </button>
                <button class="btn-modern danger" id="stopBtn" onclick="stopBot()">
                    <span class="btn-icon">‚èπÔ∏è</span>
                    <span>Stop</span>
                </button>
                <button class="btn-modern secondary" onclick="refreshData()">
                    <span class="btn-icon">üîÑ</span>
                    <span>Refresh</span>
                </button>
                <button class="btn-modern warning" onclick="testBot()" id="testBtn">
                    <span class="btn-icon">üß™</span>
                    <span>Test Bot</span>
                </button>
            </div>
            <div class="filter-section">
                <div class="search-box">
                    <input type="text" placeholder="Search coins..." id="searchInput">
                    <span class="search-icon">üîç</span>
                </div>
                <select class="filter-select" id="sortFilter">
                    <option value="change">Top Gainers</option>
                    <option value="conditions">Most Conditions</option>
                    <option value="volume">High Volume</option>
                </select>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-container">
            <!-- Live Signals Panel -->
            <div class="signals-panel">
                <div class="panel-header-modern">
                    <h3>üîî Live Signals</h3>
                    <div class="signal-count" id="signalCount">0</div>
                </div>
                
                <!-- Add scanning progress bar -->
                <div class="scanning-progress" id="scanningProgress" style="display: none;">
                    <div class="scanning-text">
                        <span class="scanning-icon">üîç</span>
                        <span>Scanning: <strong id="currentScanningCoin">BTC</strong></span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill scanning-progress-fill"></div>
                    </div>
                </div>
                
                <div class="signals-stream" id="signalsStream">
                    <div class="empty-signals">
                        <div class="empty-icon">üì°</div>
                        <p>Waiting for trading signals...</p>
                    </div>
                </div>
            </div>

            <!-- Positions Panel -->
            <div class="positions-panel">
                <div class="panel-header-modern">
                    <h3>üìä Active Positions</h3>
                    <div class="position-count" id="positionCount">0</div>
                </div>
                
                <div class="positions-stream" id="positionsStream">
                    <div class="empty-positions">
                        <div class="empty-icon">üíº</div>
                        <p>No active positions</p>
                    </div>
                </div>
                
                <!-- Test Telegram Button -->
                <div style="padding: 16px;">
                    <button class="btn-modern secondary" onclick="testTelegram()" style="width: 100%; font-size: 12px;">
                        <span class="btn-icon">üì±</span>
                        <span>Test Telegram</span>
                    </button>
                </div>
            </div>

            <!-- Gainers Grid -->
            <div class="gainers-section">
                <div class="section-header">
                    <h2>Top 50 Gainers Scanner</h2>
                    <div class="section-stats">
                        <div class="section-stat">
                            <span class="section-stat-value" id="totalCoins">50</span>
                            <span>Total Coins</span>
                        </div>
                        <div class="section-stat">
                            <span class="section-stat-value" id="scanningCount">0</span>
                            <span>Scanning</span>
                        </div>
                        <div class="section-stat">
                            <span class="section-stat-value" id="signalsCount">0</span>
                            <span>Signals</span>
                        </div>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <span style="font-size: 12px; color: var(--text-muted); margin-right: 8px;">Quick Filter:</span>
                    <div class="quick-filter active" data-filter="all">All Coins</div>
                    <div class="quick-filter" data-filter="scanning">Scanning</div>
                    <div class="quick-filter" data-filter="signals">8/8 Signals</div>
                    <div class="quick-filter" data-filter="high-change">High Gainers</div>
                </div>
                
                <div class="loading-indicator" id="loadingIndicator" style="display: none;">
                    <div class="spinner"></div>
                    <span>Loading market data...</span>
                </div>
                
                <div class="gainers-grid" id="gainersGrid">
                    <!-- Dynamic content will be loaded here -->
                </div>
            </div>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
